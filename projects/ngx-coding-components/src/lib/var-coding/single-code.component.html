<div class="fx-row-start-stretch code fx-gap-10" [style.max-height.px]="500" >
  @if (code) {
    <div class="fx-column-start-stretch " [style.width.%]="60">
        <div  class="code-main-data fx-row-start-center">
          @if (code.id === null) {
            <div class="fx-flex-fill" [style.padding-left.px]="8">
              <p>{{'code.is-null' | translate}}</p>
            </div>
            @if (enableSwitchNull) {
              <button mat-icon-button [style.width.px]="50"
                      (click)="setCodeValid()"
                      [matTooltip]="'code.make-not-null' | translate">
                <mat-icon>do_not_disturb_off</mat-icon></button>
            }
          }
          @if (code.id !== null) {
            <mat-form-field [class]="uniqueNumberValidator(code.id) ? 'unique-id' : 'not-unique-id'" [style.width.px]="80">
              <mat-label>{{'code.id' | translate}}</mat-label>
              <input matInput
                     required
                     [(ngModel)]="code.id"
                     (ngModelChange)="setCodeChanged()"
                     type="number">
            </mat-form-field>
            <div>{{code.type}}</div>
            <mat-form-field
              [class]="code.score > 0 ? 'correct' : 'not-correct'"
              [style.width.px]="100">
              <mat-label>{{'code.score' | translate}}</mat-label>
              <input matInput
                     type="number"
                     required
                     [(ngModel)]="code.score"
                     (ngModelChange)="setCodeChanged()">
            </mat-form-field>
            <mat-form-field class="fx-flex-fill">
              <mat-label>{{'code.description' | translate}}</mat-label>
              <input matInput
                     [placeholder]="'code.description' | translate"
                     [(ngModel)]="code.label"
                     (ngModelChange)="setCodeChanged()">
            </mat-form-field>
            @if (enableSwitchNull) {
              <button mat-icon-button [style.width.px]="50"
                      (click)="setCodeInvalid()"
                      [matTooltip]="'code.make-null' | translate">
                <mat-icon>do_not_disturb_on</mat-icon>
              </button>
            }
          }
        </div>
        <code-rules [style.padding-left.px]="4" [style.height]="'calc(100% - 60px)'"
                    [code]="code" [fragmentMode]="fragmentMode"
                    (codeRulesChanged)="setCodeChanged()"></code-rules>
    </div>
    <code-instruction [code]="code" (codeDataChanged)="setCodeChanged()" class="fx-flex-fill"></code-instruction>
    <button mat-icon-button (click)="deleteCode(codeIndex)" [matTooltip]="'code.prompt.delete' | translate">
      <mat-icon>delete</mat-icon>
    </button>
  }
</div>
