<div *ngIf="code" class="fx-column-start-stretch">
  <div class="code-main-data fx-row-start-center">
    <mat-form-field [class]="uniqueNumberValidator(code.id) ? 'unique-id' : 'not-unique-id'" [style.width.px]="80">
      <mat-label>{{'code.id' | translate}}</mat-label>
      <input matInput
             required
             [(ngModel)]="code.id"
             (ngModelChange)="setCodeChanged()"
             type="number">
    </mat-form-field>
    <mat-form-field [class]="code.score > 0 ? 'correct' : 'not-correct'" [style.width.px]="100">
      <mat-label>{{'code.score' | translate}}</mat-label>
      <input matInput
             type="number"
             required
             [(ngModel)]="code.score"
             (ngModelChange)="setCodeChanged()">
    </mat-form-field>
    <mat-form-field class="fx-flex-fill">
      <input matInput
             [placeholder]="'code.description' | translate"
             [(ngModel)]="code.label"
             (ngModelChange)="setCodeChanged()">
    </mat-form-field>
  </div>
  <div class="fx-row-start-start">
    <ng-container *ngIf="firstRuleSet && firstRuleSet.rules[0] && firstRuleSet.rules[0].method === 'IS_EMPTY'">
      <div class="has-rules-warning">
        <p *ngIf="code.manualInstruction"
           matTooltip="Es gibt Instruktionen für das manuelle Kodieren">!!</p>
      </div>
      <mat-card class="fx-flex-fill" [style.padding-left.px]="4">
        <mat-card-subtitle>{{'code.prompt-auto-coding' | translate}}</mat-card-subtitle>
        <mat-card-content class="fx-row-start-center">
          <div [matTooltip]="('rule.' + firstRuleSet.rules[0].method + '.description') | translate"
               matTooltipShowDelay="500">
            {{('rule.' + firstRuleSet.rules[0].method) | translate}}
          </div>
        </mat-card-content>
      </mat-card>
    </ng-container>
    <ng-container *ngIf="firstRuleSet && (!firstRuleSet.rules[0] || firstRuleSet.rules[0].method !== 'IS_EMPTY')">
      <div class="has-rules-warning">
        <p *ngIf="firstRuleSet.rules.length > 0" matTooltip="Dieser Code enthält Regeln für das automatische Kodieren.">!!</p>
      </div>
      <mat-card class="fx-flex-fill" [style.padding-left.px]="4">
        <mat-card-subtitle class="fx-row-space-between-center">
          {{'manual-instruction.prompt-code' | translate}}
          <button mat-icon-button (click)="editTextDialog_manualInstruction(translateService, editTextDialog)">
            <mat-icon>edit</mat-icon>
          </button>
        </mat-card-subtitle>
        <mat-card-content class="instructions">
          <div [innerHTML]="code ? getSanitizedText(code.manualInstruction) : null"></div>
        </mat-card-content>
      </mat-card>
    </ng-container>
  </div>
</div>
